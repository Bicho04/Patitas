!function(n){"function"==typeof define&&define.amd&&define.amd.jQuery?define(["jquery"],n):n(jQuery)}(function(n){"use strict";function e(e){return!e||void 0!==e.allowPageScroll||void 0===e.swipe&&void 0===e.swipeStatus||(e.allowPageScroll=s),void 0!==e.click&&void 0===e.tap&&(e.tap=e.click),e||(e={}),e=n.extend({},n.fn.swipe.defaults,e),this.each(function(){var i=n(this),r=i.data(D);r||(r=new t(this,e),i.data(D,r))})}function t(e,t){function z(e){if(!(cn()||n(e.target).closest(t.excludedElements,Xn).length>0)){var i,r=e.originalEvent?e.originalEvent:e,o=y?r.touches[0]:r;return Yn=m,y?Fn=r.touches.length:e.preventDefault(),Un=0,In=null,Qn=null,jn=0,Hn=0,Cn=0,_n=1,Wn=0,Vn=gn(),qn=Tn(),an(),!y||Fn===t.fingers||t.fingers===T||Q()?(hn(0,o),Gn=Dn(),2==Fn&&(hn(1,r.touches[1]),Hn=Cn=En(Vn[0].start,Vn[1].start)),(t.swipeStatus||t.pinchStatus)&&(i=N(r,Yn))):i=!1,i===!1?(Yn=x,N(r,Yn),i):(t.hold&&(ee=setTimeout(n.proxy(function(){Xn.trigger("hold",[r.target]),t.hold&&(i=t.hold.call(Xn,r,r.target))},this),t.longTapThreshold)),fn(!0),null)}}function P(n){var e=n.originalEvent?n.originalEvent:n;if(Yn!==S&&Yn!==x&&!sn()){var i,r=y?e.touches[0]:e,o=dn(r);if(Zn=Dn(),y&&(Fn=e.touches.length),t.hold&&clearTimeout(ee),Yn=E,2==Fn&&(0==Hn?(hn(1,e.touches[1]),Hn=Cn=En(Vn[0].start,Vn[1].start)):(dn(e.touches[1]),Cn=En(Vn[0].end,Vn[1].end),Qn=xn(Vn[0].end,Vn[1].end)),_n=Sn(Hn,Cn),Wn=Math.abs(Hn-Cn)),Fn===t.fingers||t.fingers===T||!y||Q()){if(In=Mn(o.start,o.end),_(n,In),Un=yn(o.start,o.end),jn=mn(),wn(In,Un),(t.swipeStatus||t.pinchStatus)&&(i=N(e,Yn)),!t.triggerOnTouchEnd||t.triggerOnTouchLeave){var l=!0;if(t.triggerOnTouchLeave){var u=zn(this);l=Pn(o.end,u)}!t.triggerOnTouchEnd&&l?Yn=$(E):t.triggerOnTouchLeave&&!l&&(Yn=$(S)),(Yn==x||Yn==S)&&N(e,Yn)}}else Yn=x,N(e,Yn);i===!1&&(Yn=x,N(e,Yn))}}function L(n){var e=n.originalEvent;return y&&e.touches.length>0?(un(),!0):(sn()&&(Fn=Jn),Zn=Dn(),jn=mn(),j()||!I()?(Yn=x,N(e,Yn)):t.triggerOnTouchEnd||0==t.triggerOnTouchEnd&&Yn===E?(n.preventDefault(),Yn=S,N(e,Yn)):!t.triggerOnTouchEnd&&Z()?(Yn=S,U(e,Yn,d)):Yn===E&&(Yn=x,N(e,Yn)),fn(!1),null)}function k(){Fn=0,Zn=0,Gn=0,Hn=0,Cn=0,_n=1,an(),fn(!1)}function R(n){var e=n.originalEvent;t.triggerOnTouchLeave&&(Yn=$(S),N(e,Yn))}function A(){Xn.unbind(kn,z),Xn.unbind(Nn,k),Xn.unbind(Rn,P),Xn.unbind(An,L),$n&&Xn.unbind($n,R),fn(!1)}function $(n){var e=n,i=C(),r=I(),o=j();return!i||o?e=x:!r||n!=E||t.triggerOnTouchEnd&&!t.triggerOnTouchLeave?!r&&n==S&&t.triggerOnTouchLeave&&(e=x):e=S,e}function N(n,e){var t=void 0;return F()||Y()||q()||Q()?((F()||Y())&&(t=U(n,e,f)),(q()||Q())&&t!==!1&&(t=U(n,e,h))):on()&&t!==!1?t=U(n,e,p):ln()&&t!==!1?t=U(n,e,g):rn()&&t!==!1&&(t=U(n,e,d)),e===x&&k(n),e===S&&(y?0==n.touches.length&&k(n):k(n)),t}function U(e,s,c){var w=void 0;if(c==f){if(Xn.trigger("swipeStatus",[s,In||null,Un||0,jn||0,Fn,Vn]),t.swipeStatus&&(w=t.swipeStatus.call(Xn,e,s,In||null,Un||0,jn||0,Fn,Vn),w===!1))return!1;if(s==S&&X()){if(Xn.trigger("swipe",[In,Un,jn,Fn,Vn]),t.swipe&&(w=t.swipe.call(Xn,e,In,Un,jn,Fn,Vn),w===!1))return!1;switch(In){case i:Xn.trigger("swipeLeft",[In,Un,jn,Fn,Vn]),t.swipeLeft&&(w=t.swipeLeft.call(Xn,e,In,Un,jn,Fn,Vn));break;case r:Xn.trigger("swipeRight",[In,Un,jn,Fn,Vn]),t.swipeRight&&(w=t.swipeRight.call(Xn,e,In,Un,jn,Fn,Vn));break;case o:Xn.trigger("swipeUp",[In,Un,jn,Fn,Vn]),t.swipeUp&&(w=t.swipeUp.call(Xn,e,In,Un,jn,Fn,Vn));break;case l:Xn.trigger("swipeDown",[In,Un,jn,Fn,Vn]),t.swipeDown&&(w=t.swipeDown.call(Xn,e,In,Un,jn,Fn,Vn))}}}if(c==h){if(Xn.trigger("pinchStatus",[s,Qn||null,Wn||0,jn||0,Fn,_n,Vn]),t.pinchStatus&&(w=t.pinchStatus.call(Xn,e,s,Qn||null,Wn||0,jn||0,Fn,_n,Vn),w===!1))return!1;if(s==S&&W())switch(Qn){case u:Xn.trigger("pinchIn",[Qn||null,Wn||0,jn||0,Fn,_n,Vn]),t.pinchIn&&(w=t.pinchIn.call(Xn,e,Qn||null,Wn||0,jn||0,Fn,_n,Vn));break;case a:Xn.trigger("pinchOut",[Qn||null,Wn||0,jn||0,Fn,_n,Vn]),t.pinchOut&&(w=t.pinchOut.call(Xn,e,Qn||null,Wn||0,jn||0,Fn,_n,Vn))}}return c==d?(s===x||s===S)&&(clearTimeout(ne),clearTimeout(ee),B()&&!nn()?(Kn=Dn(),ne=setTimeout(n.proxy(function(){Kn=null,Xn.trigger("tap",[e.target]),t.tap&&(w=t.tap.call(Xn,e,e.target))},this),t.doubleTapThreshold)):(Kn=null,Xn.trigger("tap",[e.target]),t.tap&&(w=t.tap.call(Xn,e,e.target)))):c==p?(s===x||s===S)&&(clearTimeout(ne),Kn=null,Xn.trigger("doubletap",[e.target]),t.doubleTap&&(w=t.doubleTap.call(Xn,e,e.target))):c==g&&(s===x||s===S)&&(clearTimeout(ne),Kn=null,Xn.trigger("longtap",[e.target]),t.longTap&&(w=t.longTap.call(Xn,e,e.target))),w}function I(){var n=!0;return null!==t.threshold&&(n=Un>=t.threshold),n}function j(){var n=!1;return null!==t.cancelThreshold&&null!==In&&(n=vn(In)-Un>=t.cancelThreshold),n}function H(){return null!==t.pinchThreshold?Wn>=t.pinchThreshold:!0}function C(){var n;return n=t.maxTimeThreshold&&jn>=t.maxTimeThreshold?!1:!0}function _(n,e){if(t.preventDefaultEvents!==!1)if(t.allowPageScroll===s)n.preventDefault();else{var u=t.allowPageScroll===c;switch(e){case i:(t.swipeLeft&&u||!u&&t.allowPageScroll!=w)&&n.preventDefault();break;case r:(t.swipeRight&&u||!u&&t.allowPageScroll!=w)&&n.preventDefault();break;case o:(t.swipeUp&&u||!u&&t.allowPageScroll!=v)&&n.preventDefault();break;case l:(t.swipeDown&&u||!u&&t.allowPageScroll!=v)&&n.preventDefault()}}}function W(){var n=V(),e=G(),t=H();return n&&e&&t}function Q(){return!!(t.pinchStatus||t.pinchIn||t.pinchOut)}function q(){return!(!W()||!Q())}function X(){var n=C(),e=I(),t=V(),i=G(),r=j(),o=!r&&i&&t&&e&&n;return o}function Y(){return!!(t.swipe||t.swipeStatus||t.swipeLeft||t.swipeRight||t.swipeUp||t.swipeDown)}function F(){return!(!X()||!Y())}function V(){return Fn===t.fingers||t.fingers===T||!y}function G(){return 0!==Vn[0].end.x}function Z(){return!!t.tap}function B(){return!!t.doubleTap}function J(){return!!t.longTap}function K(){if(null==Kn)return!1;var n=Dn();return B()&&n-Kn<=t.doubleTapThreshold}function nn(){return K()}function en(){return(1===Fn||!y)&&(isNaN(Un)||Un<t.threshold)}function tn(){return jn>t.longTapThreshold&&b>Un}function rn(){return!(!en()||!Z())}function on(){return!(!K()||!B())}function ln(){return!(!tn()||!J())}function un(){Bn=Dn(),Jn=event.touches.length+1}function an(){Bn=0,Jn=0}function sn(){var n=!1;if(Bn){var e=Dn()-Bn;e<=t.fingerReleaseThreshold&&(n=!0)}return n}function cn(){return!(Xn.data(D+"_intouch")!==!0)}function fn(n){n===!0?(Xn.bind(Rn,P),Xn.bind(An,L),$n&&Xn.bind($n,R)):(Xn.unbind(Rn,P,!1),Xn.unbind(An,L,!1),$n&&Xn.unbind($n,R,!1)),Xn.data(D+"_intouch",n===!0)}function hn(n,e){var t=void 0!==e.identifier?e.identifier:0;return Vn[n].identifier=t,Vn[n].start.x=Vn[n].end.x=e.pageX||e.clientX,Vn[n].start.y=Vn[n].end.y=e.pageY||e.clientY,Vn[n]}function dn(n){var e=void 0!==n.identifier?n.identifier:0,t=pn(e);return t.end.x=n.pageX||n.clientX,t.end.y=n.pageY||n.clientY,t}function pn(n){for(var e=0;e<Vn.length;e++)if(Vn[e].identifier==n)return Vn[e]}function gn(){for(var n=[],e=0;5>=e;e++)n.push({start:{x:0,y:0},end:{x:0,y:0},identifier:0});return n}function wn(n,e){e=Math.max(e,vn(n)),qn[n].distance=e}function vn(n){return qn[n]?qn[n].distance:void 0}function Tn(){var n={};return n[i]=bn(i),n[r]=bn(r),n[o]=bn(o),n[l]=bn(l),n}function bn(n){return{direction:n,distance:0}}function mn(){return Zn-Gn}function En(n,e){var t=Math.abs(n.x-e.x),i=Math.abs(n.y-e.y);return Math.round(Math.sqrt(t*t+i*i))}function Sn(n,e){var t=e/n*1;return t.toFixed(2)}function xn(){return 1>_n?a:u}function yn(n,e){return Math.round(Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2)))}function On(n,e){var t=n.x-e.x,i=e.y-n.y,r=Math.atan2(i,t),o=Math.round(180*r/Math.PI);return 0>o&&(o=360-Math.abs(o)),o}function Mn(n,e){var t=On(n,e);return 45>=t&&t>=0?i:360>=t&&t>=315?i:t>=135&&225>=t?r:t>45&&135>t?l:o}function Dn(){var n=new Date;return n.getTime()}function zn(e){e=n(e);var t=e.offset(),i={left:t.left,right:t.left+e.outerWidth(),top:t.top,bottom:t.top+e.outerHeight()};return i}function Pn(n,e){return n.x>e.left&&n.x<e.right&&n.y>e.top&&n.y<e.bottom}var Ln=y||M||!t.fallbackToMouseEvents,kn=Ln?M?O?"MSPointerDown":"pointerdown":"touchstart":"mousedown",Rn=Ln?M?O?"MSPointerMove":"pointermove":"touchmove":"mousemove",An=Ln?M?O?"MSPointerUp":"pointerup":"touchend":"mouseup",$n=Ln?null:"mouseleave",Nn=M?O?"MSPointerCancel":"pointercancel":"touchcancel",Un=0,In=null,jn=0,Hn=0,Cn=0,_n=1,Wn=0,Qn=0,qn=null,Xn=n(e),Yn="start",Fn=0,Vn=null,Gn=0,Zn=0,Bn=0,Jn=0,Kn=0,ne=null,ee=null;try{Xn.bind(kn,z),Xn.bind(Nn,k)}catch(te){n.error("events not supported "+kn+","+Nn+" on jQuery.swipe")}this.enable=function(){return Xn.bind(kn,z),Xn.bind(Nn,k),Xn},this.disable=function(){return A(),Xn},this.destroy=function(){A(),Xn.data(D,null),Xn=null},this.option=function(e,i){if(void 0!==t[e]){if(void 0===i)return t[e];t[e]=i}else n.error("Option "+e+" does not exist on jQuery.swipe.options");return null}}var i="left",r="right",o="up",l="down",u="in",a="out",s="none",c="auto",f="swipe",h="pinch",d="tap",p="doubletap",g="longtap",w="horizontal",v="vertical",T="all",b=10,m="start",E="move",S="end",x="cancel",y="ontouchstart"in window,O=window.navigator.msPointerEnabled&&!window.navigator.pointerEnabled,M=window.navigator.pointerEnabled||window.navigator.msPointerEnabled,D="TouchSwipe",z={fingers:1,threshold:75,cancelThreshold:null,pinchThreshold:20,maxTimeThreshold:null,fingerReleaseThreshold:250,longTapThreshold:500,doubleTapThreshold:200,swipe:null,swipeLeft:null,swipeRight:null,swipeUp:null,swipeDown:null,swipeStatus:null,pinchIn:null,pinchOut:null,pinchStatus:null,click:null,tap:null,doubleTap:null,longTap:null,hold:null,triggerOnTouchEnd:!0,triggerOnTouchLeave:!1,allowPageScroll:"auto",fallbackToMouseEvents:!0,excludedElements:"label, button, input, select, textarea, a, .noSwipe",preventDefaultEvents:!0};n.fn.swipe=function(t){var i=n(this),r=i.data(D);if(r&&"string"==typeof t){if(r[t])return r[t].apply(this,Array.prototype.slice.call(arguments,1));n.error("Method "+t+" does not exist on jQuery.swipe")}else if(!(r||"object"!=typeof t&&t))return e.apply(this,arguments);return i},n.fn.swipe.defaults=z,n.fn.swipe.phases={PHASE_START:m,PHASE_MOVE:E,PHASE_END:S,PHASE_CANCEL:x},n.fn.swipe.directions={LEFT:i,RIGHT:r,UP:o,DOWN:l,IN:u,OUT:a},n.fn.swipe.pageScroll={NONE:s,HORIZONTAL:w,VERTICAL:v,AUTO:c},n.fn.swipe.fingers={ONE:1,TWO:2,THREE:3,ALL:T}});
